       <!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Controle Financeiro</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
            margin: 0;
            padding: 0;
            overflow-x: hidden;
        }

        .container {
            width: 100%;
            min-height: 100vh;
            background: white;
            position: relative;
            margin: 0;
        }

        .welcome-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #4CAF50, #45a049);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            color: white;
            text-align: center;
            padding: 20px;
        }

        .welcome-content {
            max-width: 350px;
            width: 100%;
        }

        .welcome-title {
            font-size: 32px;
            margin-bottom: 10px;
            font-weight: bold;
        }

        .welcome-subtitle {
            font-size: 18px;
            margin-bottom: 40px;
            opacity: 0.9;
        }

        .welcome-form {
            background: rgba(255,255,255,0.1);
            padding: 30px;
            border-radius: 20px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
        }

        .welcome-input {
            width: 100%;
            padding: 15px;
            border: none;
            border-radius: 12px;
            font-size: 18px;
            margin-bottom: 20px;
            text-align: center;
            background: white;
            color: #333;
        }

        .welcome-btn {
            width: 100%;
            padding: 15px;
            background: white;
            color: #4CAF50;
            border: none;
            border-radius: 12px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .welcome-btn:hover {
            transform: translateY(-2px);
        }

        .emoji-icon {
            font-size: 60px;
            margin-bottom: 20px;
        }

        .header {
            background: linear-gradient(135deg, #4CAF50, #45a049);
            color: white;
            padding: 20px;
            text-align: center;
            position: relative;
        }

        .greeting {
            font-size: 16px;
            opacity: 0.9;
            margin-bottom: 5px;
        }

        .username {
            font-size: 24px;
            font-weight: bold;
        }

        .balance-card {
            background: white;
            margin: 20px;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .balance-title {
            color: #888;
            font-size: 14px;
            margin-bottom: 5px;
        }

        .balance-amount {
            font-size: 28px;
            font-weight: bold;
            color: #4CAF50;
        }

        .accounts-section {
            margin: 20px;
        }

        .section-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
        }

        .account-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: white;
            padding: 15px;
            border-radius: 12px;
            margin-bottom: 10px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .account-info {
            display: flex;
            align-items: center;
        }

        .account-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #f5f5f5;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 12px;
            font-size: 18px;
        }

        .account-details h4 {
            font-size: 16px;
            color: #333;
        }

        .account-details p {
            font-size: 12px;
            color: #888;
        }

        .account-balance {
            font-weight: bold;
            color: #4CAF50;
        }

        .expense-tracker {
            margin: 20px;
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .expense-bar {
            background: #f0f0f0;
            height: 8px;
            border-radius: 4px;
            margin: 10px 0;
            position: relative;
        }

        .expense-fill {
            background: linear-gradient(90deg, #ff6b6b, #ee5a24);
            height: 100%;
            border-radius: 4px;
            transition: width 0.3s ease;
        }

        .expense-info {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
            font-size: 14px;
        }

        .expense-limit {
            color: #888;
        }

        .expense-current {
            font-weight: bold;
            color: #ff6b6b;
        }

        .navigation {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background: white;
            padding: 15px 0;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
        }

        .nav-items {
            display: flex;
            justify-content: space-around;
            align-items: center;
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 10px;
            cursor: pointer;
            transition: color 0.3s ease;
            color: #888;
        }

        .nav-item.active {
            color: #4CAF50;
        }

        .nav-item:hover {
            color: #4CAF50;
        }

        .add-btn {
            background: #4CAF50;
            color: white;
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(76,175,80,0.3);
        }

        .tab-content {
            display: none;
            padding-bottom: 100px;
            min-height: calc(100vh - 80px);
            overflow-y: auto;
        }

        .tab-content.active {
            display: block;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #333;
        }

        .form-group input, .form-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #f0f0f0;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus, .form-group select:focus {
            outline: none;
            border-color: #4CAF50;
        }

        .btn {
            width: 100%;
            padding: 15px;
            background: #4CAF50;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: background 0.3s ease;
        }

        .btn:hover {
            background: #45a049;
        }

        .transaction-list {
            margin: 20px;
        }

        .transaction-item {
            background: white;
            padding: 15px;
            border-radius: 12px;
            margin-bottom: 10px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .transaction-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
        }

        .transaction-icon.income {
            background: #e8f5e8;
            color: #4CAF50;
        }

        .transaction-icon.expense {
            background: #ffeaea;
            color: #ff6b6b;
        }

        .transaction-details h4 {
            font-size: 16px;
            margin-bottom: 4px;
        }

        .transaction-details p {
            font-size: 12px;
            color: #888;
        }

        .transaction-amount.income {
            color: #4CAF50;
            font-weight: bold;
        }

        .transaction-amount.expense {
            color: #ff6b6b;
            font-weight: bold;
        }

        .chart-container {
            background: white;
            margin: 20px;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            min-height: 250px;
        }

        .chart {
            width: 100%;
            height: 200px !important;
            margin: 20px 0;
        }

        .no-data-message {
            text-align: center;
            color: #888;
            padding: 40px 20px;
            font-style: italic;
        }

        .empty-chart {
            width: 100%;
            height: 200px;
            background: #f9f9f9;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #999;
            font-size: 16px;
            margin: 20px 0;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 20px;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .stat-value {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 12px;
            color: #888;
        }

        .prediction-card {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            margin: 20px;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .hidden {
            display: none !important;
        }
    </style>
</head>
<body>
    <!-- Tela de Boas-vindas -->
    <div id="welcome-screen" class="welcome-screen">
        <div class="welcome-content">
            <div class="emoji-icon">üí∞</div>
            <h1 class="welcome-title">Controle Financeiro</h1>
            <p class="welcome-subtitle">Gerencie suas finan√ßas de forma simples e inteligente</p>
            
            <div class="welcome-form">
                <input type="text" id="user-name-input" class="welcome-input" placeholder="Qual √© o seu nome?" maxlength="20" required>
                <button onclick="saveUserName()" class="welcome-btn">Come√ßar</button>
            </div>
        </div>
    </div>

    <div class="container">
        <!-- Aba Principal -->
        <div id="home-tab" class="tab-content active">
            <div class="header">
                <div class="greeting" id="greeting-text">Bom dia</div>
                <div class="username" id="user-display">Usu√°rio!</div>
            </div>

            <div class="balance-card">
                <div class="balance-title">Saldo geral</div>
                <div class="balance-amount" id="total-balance">R$ 0,00</div>
            </div>

            <div class="accounts-section">
                <h3 class="section-title">Meus saldos</h3>
                
                <div class="account-item">
                    <div class="account-info">
                        <div class="account-icon">üí∞</div>
                        <div class="account-details">
                            <h4>Conta inicial</h4>
                            <p>Principal</p>
                        </div>
                    </div>
                    <div class="account-balance" id="main-account">R$ 0,00</div>
                </div>

                <div class="account-item">
                    <div class="account-info">
                        <div class="account-icon">üí≥</div>
                        <div class="account-details">
                            <h4>Carteira</h4>
                            <p>Dinheiro</p>
                        </div>
                    </div>
                    <div class="account-balance" id="wallet-account">R$ 0,00</div>
                </div>
            </div>

            <div class="expense-tracker">
                <h3 class="section-title">Gastos essenciais</h3>
                <div class="expense-bar">
                    <div class="expense-fill" id="expense-bar" style="width: 0%"></div>
                </div>
                <div class="expense-info">
                    <span class="expense-limit">Limite recomendado R$ 500,00</span>
                    <span class="expense-current" id="current-expenses">R$ 0,00</span>
                </div>
            </div>
        </div>

        <!-- Aba Adicionar -->
        <div id="add-tab" class="tab-content">
            <div class="header">
                <div class="username">Nova Transa√ß√£o</div>
            </div>

            <div style="margin: 15px; background: white; padding: 20px; border-radius: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.1);">
                <form id="transaction-form">
                    <div class="form-group">
                        <label>Tipo</label>
                        <select id="transaction-type">
                            <option value="income">Receita</option>
                            <option value="expense">Despesa</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Descri√ß√£o</label>
                        <input type="text" id="transaction-description" placeholder="Digite a descri√ß√£o" required>
                    </div>

                    <div class="form-group">
                        <label>Valor</label>
                        <input type="number" id="transaction-amount" placeholder="0,00" step="0.01" required>
                    </div>

                    <div class="form-group">
                        <label>Categoria</label>
                        <select id="transaction-category">
                            <option value="alimentacao">Alimenta√ß√£o</option>
                            <option value="transporte">Transporte</option>
                            <option value="saude">Sa√∫de</option>
                            <option value="lazer">Lazer</option>
                            <option value="educacao">Educa√ß√£o</option>
                            <option value="moradia">Moradia</option>
                            <option value="outros">Outros</option>
                        </select>
                    </div>

                    <button type="submit" class="btn">Adicionar Transa√ß√£o</button>
                </form>
            </div>
        </div>

        <!-- Aba Hist√≥rico -->
        <div id="history-tab" class="tab-content">
            <div class="header">
                <div class="username">Hist√≥rico</div>
            </div>

            <div class="transaction-list" id="transaction-list">
                <div class="no-data-message" id="no-transactions" style="display: none;">
                    üìã Nenhuma transa√ß√£o ainda<br>
                    <small>Adicione receitas e despesas para ver o hist√≥rico</small>
                </div>
                <!-- Transa√ß√µes ser√£o inseridas aqui -->
            </div>
        </div>

        <!-- Aba Relat√≥rios -->
        <div id="reports-tab" class="tab-content">
            <div class="header">
                <div class="username">Relat√≥rios</div>
            </div>

            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value" id="total-income" style="color: #4CAF50;">R$ 0</div>
                    <div class="stat-label">Total Receitas</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="total-expenses" style="color: #ff6b6b;">R$ 0</div>
                    <div class="stat-label">Total Despesas</div>
                </div>
            </div>

            <div class="chart-container">
                <h3>Gastos por Categoria</h3>
                <canvas id="expense-chart" class="chart"></canvas>
            </div>

            <div class="prediction-card">
                <h3>Previs√£o Pr√≥ximo M√™s</h3>
                <p id="prediction-text">Com base nos seus gastos atuais, voc√™ ter√° um resultado positivo no pr√≥ximo m√™s! üìà</p>
            </div>
        </div>

        <!-- Navega√ß√£o -->
        <div class="navigation">
            <div class="nav-items">
                <div class="nav-item active" onclick="switchTab('home-tab', this)">
                    <span style="font-size: 20px;">üè†</span>
                    <small>In√≠cio</small>
                </div>
                <div class="nav-item" onclick="switchTab('add-tab', this)">
                    <button class="add-btn">+</button>
                    <small>Adicionar</small>
                </div>
                <div class="nav-item" onclick="switchTab('history-tab', this)">
                    <span style="font-size: 20px;">üìã</span>
                    <small>Hist√≥rico</small>
                </div>
                <div class="nav-item" onclick="switchTab('reports-tab', this)">
                    <span style="font-size: 20px;">üìä</span>
                    <small>Relat√≥rios</small>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <script>
        let transactions = JSON.parse(localStorage.getItem('transactions')) || [];
        let userName = localStorage.getItem('userName') || '';
        let expenseChart;

        // Fun√ß√£o para salvar o nome do usu√°rio
        function saveUserName() {
            const nameInput = document.getElementById('user-name-input');
            const name = nameInput.value.trim();
            
            if (name) {
                userName = name;
                localStorage.setItem('userName', userName);
                document.getElementById('welcome-screen').style.display = 'none';
                updateGreeting();
            } else {
                alert('Por favor, digite seu nome!');
            }
        }

        // Fun√ß√£o para atualizar a sauda√ß√£o
        function updateGreeting() {
            const now = new Date();
            const hours = now.getHours();
            let greeting = 'Bom dia';
            
            if (hours >= 12 && hours < 18) {
                greeting = 'Boa tarde';
            } else if (hours >= 18) {
                greeting = 'Boa noite';
            }
            
            document.getElementById('greeting-text').textContent = greeting;
            document.getElementById('user-display').textContent = `${userName}!`;
        }

        // Verificar se o usu√°rio j√° tem nome salvo
        function checkUserName() {
            if (userName) {
                document.getElementById('welcome-screen').style.display = 'none';
                updateGreeting();
            }
        }

        // Permitir Enter para confirmar o nome
        function setupWelcomeEvents() {
            const nameInput = document.getElementById('user-name-input');
            nameInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    saveUserName();
                }
            });
        }

        function switchTab(tabId, element) {
            // Esconder todas as abas
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
                tab.scrollTop = 0; // Reset scroll position
            });
            
            // Remover active de todos os nav items
            document.querySelectorAll('.nav-item').forEach(nav => {
                nav.classList.remove('active');
            });
            
            // Mostrar aba selecionada e ativar nav item
            document.getElementById(tabId).classList.add('active');
            element.classList.add('active');
            
            if (tabId === 'reports-tab') {
                setTimeout(() => {
                    updateChart();
                }, 100);
            }
        }

        function saveTransactions() {
            localStorage.setItem('transactions', JSON.stringify(transactions));
        }

        function updateUI() {
            const totalIncome = transactions
                .filter(t => t.type === 'income')
                .reduce((sum, t) => sum + t.amount, 0);
                
            const totalExpenses = transactions
                .filter(t => t.type === 'expense')
                .reduce((sum, t) => sum + t.amount, 0);
                
            const balance = totalIncome - totalExpenses;
            
            // Atualizar saldo total
            document.getElementById('total-balance').textContent = `R$ ${balance.toFixed(2).replace('.', ',')}`;
            document.getElementById('main-account').textContent = `R$ ${balance.toFixed(2).replace('.', ',')}`;
            
            // Atualizar gastos essenciais
            const essentialExpenses = transactions
                .filter(t => t.type === 'expense' && ['alimentacao', 'moradia', 'transporte', 'saude'].includes(t.category))
                .reduce((sum, t) => sum + t.amount, 0);
                
            document.getElementById('current-expenses').textContent = `R$ ${essentialExpenses.toFixed(2).replace('.', ',')}`;
            
            const expensePercentage = Math.min((essentialExpenses / 500) * 100, 100);
            document.getElementById('expense-bar').style.width = `${expensePercentage}%`;
            
            // Atualizar estat√≠sticas
            document.getElementById('total-income').textContent = `R$ ${totalIncome.toFixed(0)}`;
            document.getElementById('total-expenses').textContent = `R$ ${totalExpenses.toFixed(0)}`;
            
            // Atualizar previs√£o
            const avgMonthlyExpenses = totalExpenses;
            const avgMonthlyIncome = totalIncome;
            const prediction = avgMonthlyIncome > avgMonthlyExpenses ? 
                "Com base nos seus gastos atuais, voc√™ ter√° um resultado positivo no pr√≥ximo m√™s! üìà" :
                "Aten√ß√£o! Suas despesas est√£o maiores que as receitas. Considere revisar seus gastos. üìâ";
                
            document.getElementById('prediction-text').textContent = prediction;
            
            updateTransactionList();
        }

        function updateTransactionList() {
            const list = document.getElementById('transaction-list');
            const noDataMessage = document.getElementById('no-transactions');
            
            // Limpar lista mantendo a mensagem de "sem dados"
            const children = Array.from(list.children);
            children.forEach(child => {
                if (child.id !== 'no-transactions') {
                    child.remove();
                }
            });
            
            const recentTransactions = transactions.slice(-10).reverse();
            
            if (recentTransactions.length === 0) {
                noDataMessage.style.display = 'block';
                return;
            }
            
            noDataMessage.style.display = 'none';
            
            recentTransactions.forEach(transaction => {
                const item = document.createElement('div');
                item.className = 'transaction-item';
                
                const categoryIcons = {
                    'alimentacao': 'üçΩÔ∏è',
                    'transporte': 'üöó',
                    'saude': 'üè•',
                    'lazer': 'üéÆ',
                    'educacao': 'üìö',
                    'moradia': 'üè†',
                    'outros': 'üì¶'
                };
                
                const categoryNames = {
                    'alimentacao': 'Alimenta√ß√£o',
                    'transporte': 'Transporte',
                    'saude': 'Sa√∫de',
                    'lazer': 'Lazer',
                    'educacao': 'Educa√ß√£o',
                    'moradia': 'Moradia',
                    'outros': 'Outros'
                };
                
                item.innerHTML = `
                    <div style="display: flex; align-items: center;">
                        <div class="transaction-icon ${transaction.type}">
                            ${transaction.type === 'income' ? 'üí∞' : categoryIcons[transaction.category]}
                        </div>
                        <div class="transaction-details" style="margin-left: 12px;">
                            <h4>${transaction.description}</h4>
                            <p>${categoryNames[transaction.category] || 'Outros'}</p>
                        </div>
                    </div>
                    <div class="transaction-amount ${transaction.type}">
                        ${transaction.type === 'income' ? '+' : '-'}R$ ${transaction.amount.toFixed(2).replace('.', ',')}
                    </div>
                `;
                
                list.appendChild(item);
            });
        }

        function updateChart() {
            const canvas = document.getElementById('expense-chart');
            const ctx = canvas.getContext('2d');
            
            if (expenseChart) {
                expenseChart.destroy();
            }
            
            const expensesByCategory = {};
            transactions.filter(t => t.type === 'expense').forEach(t => {
                expensesByCategory[t.category] = (expensesByCategory[t.category] || 0) + t.amount;
            });
            
            // Se n√£o h√° dados, mostrar mensagem
            if (Object.keys(expensesByCategory).length === 0) {
                canvas.style.display = 'none';
                let noDataDiv = document.getElementById('no-data-chart');
                if (!noDataDiv) {
                    noDataDiv = document.createElement('div');
                    noDataDiv.id = 'no-data-chart';
                    noDataDiv.className = 'empty-chart';
                    noDataDiv.textContent = 'üìä Adicione despesas para ver o gr√°fico';
                    canvas.parentNode.appendChild(noDataDiv);
                }
                noDataDiv.style.display = 'flex';
                return;
            }
            
            // Remover mensagem de "sem dados" se existir
            const noDataDiv = document.getElementById('no-data-chart');
            if (noDataDiv) {
                noDataDiv.style.display = 'none';
            }
            canvas.style.display = 'block';
            
            const categoryNames = {
                'alimentacao': 'Alimenta√ß√£o',
                'transporte': 'Transporte',
                'saude': 'Sa√∫de',
                'lazer': 'Lazer',
                'educacao': 'Educa√ß√£o',
                'moradia': 'Moradia',
                'outros': 'Outros'
            };
            
            const colors = ['#FF6B6B', '#4ECDC4', '#45B7D1', '#96CEB4', '#FECA57', '#FF9FF3', '#54A0FF'];
            
            expenseChart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: Object.keys(expensesByCategory).map(k => categoryNames[k]),
                    datasets: [{
                        data: Object.values(expensesByCategory),
                        backgroundColor: colors,
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                padding: 15,
                                usePointStyle: true,
                                font: {
                                    size: 12
                                }
                            }
                        }
                    },
                    layout: {
                        padding: 10
                    }
                }
            });
        }

        document.getElementById('transaction-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const type = document.getElementById('transaction-type').value;
            const description = document.getElementById('transaction-description').value;
            const amount = parseFloat(document.getElementById('transaction-amount').value);
            const category = document.getElementById('transaction-category').value;
            
            const transaction = {
                id: Date.now(),
                type,
                description,
                amount,
                category,
                date: new Date().toISOString()
            };
            
            transactions.push(transaction);
            saveTransactions();
            updateUI();
            
            // Limpar formul√°rio
            document.getElementById('transaction-form').reset();
            
            // Voltar para a aba inicial
            switchTab('home-tab', document.querySelector('.nav-item'));
        });

        // Inicializar aplica√ß√£o
        document.addEventListener('DOMContentLoaded', function() {
            setupWelcomeEvents();
            checkUserName();
            updateUI();
        });
    </script>
</body>
</html>